historic <- function() {
    cat("Calculating correlations\n")
    calculate_pearsonr <- function(row)
        correlation_magnitude(row["A"], row["B"])
    correlations  <- apply(valid, 1, calculate_pearsonr)

    cat("Calculating causal relations\n")
    calculate_causal <- function(row)
        causal_relation(row["A"], row["B"])
    causal_relations <- apply(valid, 1, calculate_causal)

    scores <- correlations * causal_relations

}



cat("Reading the valid pairs\n")
valid <- read_valid_pairs()

valid <- ddply(valid, .(sampleid), summarise,
               A_sampsize = length(A),
               B_sampsize = length(B),
               A_uniq_samp_size = count_unique(A),
               B_uniq_samp_size = count_unique(B),
               A_norm_entropy = normalized_entropy(A),
               B_norm_entropy = normalized_entropy(B),
               pearson_R = cor(A, B),
               pearson_R_magnit = correlation_magnitude(A, B),
               entropy_diff =  entropy_difference(A, B)
               )


cat("Loading the classifier\n")
classifier <- load_model()


cat("Making predictions\n")
predictions <- predict(classifier, valid, type = "response")

cat("Writing predictions to file\n")
write_submission(predictions)
predictions
